version: '3.8'

# ğŸŒ å…¨çƒåŒ–åœºæ™¯ç½‘ç»œæµ‹è¯•é…ç½®

services:
  # GFW åœºæ™¯ - ä¸­å›½ç”¨æˆ·ç¿»å¢™è®¿é—®æµ·å¤–
  room-service-gfw:
    build: .
    container_name: room-service-gfw
    ports:
      - "9030:9000"
    environment:
      - RUST_LOG=info
      - ROOM_SERVICE_ADDR=0.0.0.0:9000
      - TICK_RATE=30
    cap_add:
      - NET_ADMIN
    deploy:
      resources:
        limits:
          cpus: '4.0'
          memory: 8G
    networks:
      - global-test
    profiles:
      - gfw

  # è·¨å¤ªå¹³æ´‹ - ä¸­å›½â†”ç¾å›½
  room-service-transpacific:
    build: .
    container_name: room-service-transpacific
    ports:
      - "9031:9000"
    environment:
      - RUST_LOG=info
      - ROOM_SERVICE_ADDR=0.0.0.0:9000
      - TICK_RATE=30
    cap_add:
      - NET_ADMIN
    deploy:
      resources:
        limits:
          cpus: '4.0'
          memory: 8G
    networks:
      - global-test
    profiles:
      - transpacific

  # è·¨å¤§è¥¿æ´‹ - æ¬§æ´²â†”ç¾å›½
  room-service-transatlantic:
    build: .
    container_name: room-service-transatlantic
    ports:
      - "9032:9000"
    environment:
      - RUST_LOG=info
      - ROOM_SERVICE_ADDR=0.0.0.0:9000
      - TICK_RATE=30
    cap_add:
      - NET_ADMIN
    deploy:
      resources:
        limits:
          cpus: '4.0'
          memory: 8G
    networks:
      - global-test
    profiles:
      - transatlantic

networks:
  global-test:
    driver: bridge
