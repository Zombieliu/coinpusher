#1 [internal] load local bake definitions
#1 reading from stdin 844B done
#1 DONE 0.0s

#2 [gate-server internal] load build definition from Dockerfile.gate
#2 DONE 0.0s

#3 [admin-dashboard internal] load build definition from Dockerfile
#3 transferring dockerfile: 979B done
#3 DONE 0.0s

#2 [gate-server internal] load build definition from Dockerfile.gate
#2 transferring dockerfile: 2.38kB done
#2 DONE 0.0s

#4 [admin-dashboard internal] load metadata for docker.io/library/node:20-alpine
#4 DONE 3.2s

#5 [gate-server internal] load .dockerignore
#5 transferring context: 2B done
#5 DONE 0.0s

#6 [admin-dashboard internal] load .dockerignore
#6 transferring context: 166B done
#6 DONE 0.0s

#7 [admin-dashboard base 1/2] FROM docker.io/library/node:20-alpine@sha256:643e7036aa985317ebfee460005e322aa550c6b6883000d01daefb58689a58e2
#7 DONE 0.0s

#8 [admin-dashboard internal] load build context
#8 transferring context: 12.18kB done
#8 DONE 0.0s

#9 [admin-dashboard base 2/2] RUN corepack enable && corepack prepare pnpm@latest --activate
#9 CACHED

#10 [admin-dashboard deps 1/3] WORKDIR /app
#10 CACHED

#11 [admin-dashboard deps 3/3] RUN pnpm install --frozen-lockfile
#11 CACHED

#12 [admin-dashboard deps 2/3] COPY package.json pnpm-lock.yaml ./
#12 CACHED

#13 [admin-dashboard builder 2/4] COPY --from=deps /app/node_modules ./node_modules
#13 CACHED

#14 [admin-dashboard builder 3/4] COPY . .
#14 DONE 0.0s

#15 [gate-server internal] load build context
#15 transferring context: 29.15kB 1.7s done
#15 DONE 1.8s

#16 [gate-server runner  2/10] RUN apk add --no-cache dumb-init wget
#16 CACHED

#17 [gate-server builder 7/9] COPY src ./src
#17 CACHED

#18 [gate-server runner  8/10] COPY --from=builder /app/src/module/common/table/config ./dist/module/common/table/config
#18 CACHED

#19 [gate-server runner  9/10] COPY --from=builder /app/src/*.key /app/src/*.crt ./dist/
#19 CACHED

#20 [gate-server deps 4/4] RUN npm ci
#20 CACHED

#21 [gate-server builder 8/9] RUN npx tsc --skipLibCheck || true
#21 CACHED

#22 [gate-server runner  6/10] RUN npm install --omit=dev &&     npm cache clean --force
#22 CACHED

#23 [gate-server deps 2/4] WORKDIR /app
#23 CACHED

#24 [gate-server builder 9/9] RUN if [ ! -d "dist" ]; then npx tsc --skipLibCheck --noEmitOnError false; fi
#24 CACHED

#25 [gate-server builder 6/9] COPY tsrpc.config.ts ./
#25 CACHED

#26 [gate-server runner  5/10] COPY package*.json ./
#26 CACHED

#27 [gate-server runner  4/10] RUN addgroup -g 1001 -S nodejs &&     adduser -S nodejs -u 1001
#27 CACHED

#28 [gate-server runner  3/10] WORKDIR /app
#28 CACHED

#29 [gate-server runner  7/10] COPY --from=builder /app/dist ./dist
#29 CACHED

#30 [gate-server builder 3/9] COPY --from=deps /app/node_modules ./node_modules
#30 CACHED

#31 [gate-server deps 3/4] COPY package*.json ./
#31 CACHED

#32 [gate-server builder 5/9] COPY tsconfig.json ./
#32 CACHED

#33 [gate-server builder 4/9] COPY package*.json ./
#33 CACHED

#34 [gate-server runner 10/10] RUN mkdir -p /app/logs &&     chown -R nodejs:nodejs /app
#34 CACHED

#35 [gate-server] exporting to image
#35 exporting layers done
#35 writing image sha256:693ccf1c08c5607c005ae75a666e2de3489f745d6283a8d54edc5bbc08b47af2 done
#35 naming to docker.io/library/oops-coinpusher-gate-server done
#35 DONE 0.0s

#36 [gate-server] resolving provenance for metadata file
#36 DONE 0.0s

#37 [admin-dashboard builder 4/4] RUN pnpm run build
#37 0.386 
#37 0.386 > oops-coinpusher-admin@1.0.0 build /app
#37 0.386 > next build
#37 0.386 
#37 0.776 Attention: Next.js now collects completely anonymous telemetry regarding usage.
#37 0.777 This information is used to shape Next.js' roadmap and prioritize features.
#37 0.777 You can learn more, including how to opt-out if you'd not like to participate in this anonymous program, by visiting the following URL:
#37 0.777 https://nextjs.org/telemetry
#37 0.777 
#37 0.834    ▲ Next.js 15.5.6
#37 0.834 
#37 0.905    Creating an optimized production build ...
#37 14.42  ✓ Compiled successfully in 11.8s
#37 14.42    Linting and checking validity of types ...
#37 19.38    Collecting page data ...
#37 20.76    Generating static pages (0/19) ...
#37 21.19    Generating static pages (4/19) 
#37 21.27    Generating static pages (9/19) 
#37 21.27    Generating static pages (14/19) 
#37 21.27  ✓ Generating static pages (19/19)
#37 21.87    Finalizing page optimization ...
#37 21.87    Collecting build traces ...
#37 37.63 
#37 37.64 Route (app)                                 Size  First Load JS
#37 37.64 ┌ ○ /                                      461 B         102 kB
#37 37.64 ├ ○ /_not-found                            994 B         103 kB
#37 37.64 ├ ○ /dashboard                           3.67 kB         113 kB
#37 37.64 ├ ○ /dashboard/admins                    3.61 kB         113 kB
#37 37.64 ├ ○ /dashboard/analytics                 4.78 kB         107 kB
#37 37.64 ├ ○ /dashboard/announcements             6.31 kB         154 kB
#37 37.64 ├ ○ /dashboard/audit                     4.43 kB         106 kB
#37 37.64 ├ ○ /dashboard/cdk                       6.26 kB         154 kB
#37 37.64 ├ ○ /dashboard/config                    4.51 kB         106 kB
#37 37.64 ├ ○ /dashboard/events                    4.78 kB         107 kB
#37 37.64 ├ ○ /dashboard/finance                   9.09 kB         153 kB
#37 37.64 ├ ○ /dashboard/logs                       1.5 kB         103 kB
#37 37.64 ├ ○ /dashboard/mails                     3.35 kB         105 kB
#37 37.64 ├ ○ /dashboard/monitor                   4.61 kB         114 kB
#37 37.64 ├ ○ /dashboard/users                     3.62 kB         113 kB
#37 37.64 ├ ƒ /dashboard/users/[userId]            10.1 kB         141 kB
#37 37.64 ├ ○ /dashboard/users/batch               8.05 kB         122 kB
#37 37.64 └ ○ /login                               2.49 kB         104 kB
#37 37.64 + First Load JS shared by all             102 kB
#37 37.64   ├ chunks/52354350-b97add9366503fa8.js  54.2 kB
#37 37.64   ├ chunks/996-05b7de92418afb81.js       45.8 kB
#37 37.64   └ other shared chunks (total)          1.93 kB
#37 37.64 
#37 37.64 
#37 37.64 ○  (Static)   prerendered as static content
#37 37.64 ƒ  (Dynamic)  server-rendered on demand
#37 37.64 
#37 DONE 37.8s

#38 [admin-dashboard runner 2/5] RUN addgroup --system --gid 1001 nodejs
#38 CACHED

#39 [admin-dashboard runner 3/5] RUN adduser --system --uid 1001 nextjs
#39 CACHED

#40 [admin-dashboard runner 4/5] COPY --from=builder --chown=nextjs:nodejs /app/.next/standalone ./
#40 DONE 0.2s

#41 [admin-dashboard runner 5/5] COPY --from=builder --chown=nextjs:nodejs /app/.next/static ./.next/static
#41 DONE 0.0s

#42 [admin-dashboard] exporting to image
#42 exporting layers
#42 exporting layers 0.2s done
#42 writing image sha256:1144940b0a83281c3179928cc6976879d9620909131d4420ad6654e18477c8af
#42 writing image sha256:1144940b0a83281c3179928cc6976879d9620909131d4420ad6654e18477c8af done
#42 naming to docker.io/library/oops-coinpusher-admin-dashboard done
#42 DONE 0.2s

#43 [admin-dashboard] resolving provenance for metadata file
#43 DONE 0.0s
 gate-server  Built
 admin-dashboard  Built
 Container oops-coinpusher-mongodb  Running
 Container oops-coinpusher-gate  Recreate
 Container oops-coinpusher-gate  Recreated
 Container oops-coinpusher-mongodb  Waiting
 Container oops-coinpusher-mongodb  Healthy
 Container oops-coinpusher-gate  Starting
Error response from daemon: driver failed programming external connectivity on endpoint oops-coinpusher-gate (ae950cd6077807fb645a2411c78993cb4eb496eb794dba36cd2dd905f75780c9): Bind for 0.0.0.0:3004 failed: port is already allocated
