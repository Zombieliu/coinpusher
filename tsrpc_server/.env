# ========================================
# Coin Pusher Game - 生产配置
# 自动生成时间: 2025-12-08
# ========================================

# ========================================
# 🔒 安全配置
# ========================================
# 内部服务通信密钥（32字符以上强随机字符串）
INTERNAL_SECRET_KEY=coinpusher-2025-super-secret-key-for-internal-communication-xyz123

# 环境模式
NODE_ENV=production

# 强制启用HTTPS/WSS
FORCE_HTTPS=false

# 启用协议层加密
ENABLE_SECURITY=false

# 客户端完整性校验
INTEGRITY_CHECK_STRICT=false

# 物理引擎快照签名
ENABLE_SNAPSHOT_SIGNATURE=false

# 请求签名配置
ENABLE_REQUEST_SIGNATURE=true

# 时间戳防重放（秒）
TIMESTAMP_TOLERANCE_SECONDS=5

# ========================================
# 🌐 服务器端口配置
# ========================================
# Gate Server 配置
GATE_URL=http://127.0.0.1:3000
GATE_PORT=3000

# Room Server 配置
ROOM_PORT=3001

# Match Server 配置
MATCH_PORT=3002

# ========================================
# 🚀 监控服务器端口
# ========================================
MONITORING_PORT=9090
MATCH_MONITORING_PORT=9091
ROOM_MONITORING_PORT=9092

# ========================================
# 🗄️ MongoDB 配置
# ========================================
# 开发环境（Docker Compose 内部）
MONGODB_URI=mongodb://coinpusher_app:coinpusher_secure_password_2025@mongodb:27017/coinpusher_game?authSource=admin

# MongoDB 认证配置
MONGODB_USER=coinpusher_app
MONGODB_PASSWORD=coinpusher_secure_password_2025

# MongoDB 连接池
MONGODB_MAX_POOL_SIZE=100
MONGODB_MIN_POOL_SIZE=10

# ========================================
# 💾 DragonflyDB/Redis 配置
# ========================================
REDIS_HOST=dragonflydb
REDIS_PORT=6379
REDIS_PASSWORD=

# Redis 连接配置
REDIS_MAX_RETRIES=3
REDIS_RETRY_DELAY=1000

# ========================================
# 📦 缓存配置
# ========================================
# 内存缓存配置
MEMORY_CACHE_MAX_SIZE=1000
MEMORY_CACHE_DEFAULT_TTL=300000

# Redis 缓存 TTL（毫秒）
REDIS_CACHE_DEFAULT_TTL=3600000

# 缓存键前缀
CACHE_KEY_PREFIX=coinpusher

# ========================================
# 📊 日志配置
# ========================================
LOG_LEVEL=info
LOG_FILE_PATH=./logs/app.log
LOG_ERROR_FILE_PATH=./logs/error.log
LOG_MAX_FILES=30
LOG_API_REQUESTS=true

# ========================================
# 📈 性能监控配置
# ========================================
PROMETHEUS_ENABLED=true
METRICS_PREFIX=coinpusher
HEALTH_CHECK_TIMEOUT=5000

# ========================================
# 🔔 告警配置（可选）
# ========================================
# Slack Webhook（需要时填写）
SLACK_WEBHOOK_URL=

# 邮件告警配置（需要时填写）
ALERT_EMAIL_SMTP_HOST=
ALERT_EMAIL_SMTP_PORT=587
ALERT_EMAIL_FROM=
ALERT_EMAIL_TO=
ALERT_EMAIL_PASSWORD=

# ========================================
# 🎮 游戏配置
# ========================================
# 每日奖励上限（金币）
DAILY_REWARD_LIMIT=1000

# 单次最大投币金额
MAX_COIN_VALUE=10

# 投币冷却时间（毫秒）
DROP_COIN_COOLDOWN_MS=500

# 投币频率限制（每分钟最大次数）
DROP_COIN_MAX_PER_MINUTE=60

# ========================================
# 🐳 Docker 部署配置
# ========================================
GATE_SERVICE_NAME=gate-server
MATCH_SERVICE_NAME=match-server
ROOM_SERVICE_NAME=room-server
MONGODB_SERVICE_NAME=mongodb
REDIS_SERVICE_NAME=dragonflydb

# ========================================
# ⚡ 性能配置
# ========================================
# 限流配置
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# PM2 进程数量
PM2_INSTANCES=4

# ========================================
# 🌍 其他配置
# ========================================
# 时区
TZ=Asia/Shanghai

# CORS 配置
CORS_ORIGIN=*

# 调试模式
DEBUG=false

# 性能分析
ENABLE_PROFILING=false

# ========================================
# Grafana 配置
# ========================================
GRAFANA_ADMIN_PASSWORD=admin123
